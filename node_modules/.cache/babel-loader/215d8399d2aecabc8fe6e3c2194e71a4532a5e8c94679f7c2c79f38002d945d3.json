{"ast":null,"code":"import { computed, reactive, ref } from 'vue';\nimport { storeToRefs } from 'pinia';\n// import { usePatients } from '@/store/patients.pinia'\nimport TheComponentHeader from '@/components/TheComponentHeader.vue';\nimport PriceSpacer from \"@/helpers/PriceSpacer.js\";\nimport ThePagination from '@/components/ThePagination.vue';\n// import { useDoctors } from '@/store/doctors.pinia';\nimport { useStore } from '@/store';\nimport priceSpacer from '@/helpers/PriceSpacer.js';\n// const storePatient = usePatients();\n// const storeDoctor = useDoctors();\nconst formLabelWidth = '140px';\nexport default {\n  __name: 'CashList',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const store = useStore();\n    const {\n      patients,\n      doctors\n    } = storeToRefs(store);\n    // const { doctors } = storeToRefs(storeDoctor);\n    const cashDialog = ref(false);\n    const size = ref(10);\n    const currentPage = ref(1);\n    const form = reactive({\n      name: null,\n      doctorId: null,\n      totalSum: 300000,\n      payedByCash: null,\n      payedByCard: null,\n      totalDebt: null,\n      patientId: null\n    });\n    const submitCash = () => {\n      if (Number(totalDebt.value) >= 0 && Number(form.totalSum) === Number(form.payedByCash) + Number(form.payedByCard) + Number(totalDebt.value)) {\n        console.log('submitted');\n        cashDialog.value = !cashDialog.value;\n      } else {\n        console.log('xato');\n      }\n    };\n    const handleRowClick = row => {\n      cashDialog.value = !cashDialog.value;\n      // useDoctors().getAllDoctors();\n      form.name = row.name;\n      form.doctorId = row.doctorId;\n      form.patientId = row.id;\n    };\n    const averageSum = computed(() => {\n      return Number(form.totalSum) < Number(form.payedByCash) + Number(form.payedByCard) ? true : false;\n    });\n    const totalDebt = computed(() => {\n      return Number(form.totalSum) - (Number(form.payedByCash) + Number(form.payedByCard));\n    });\n\n    // onMounted(() => {\n    //     usePatients().getAllPatients()\n    // })\n\n    const __returned__ = {\n      store,\n      patients,\n      doctors,\n      cashDialog,\n      formLabelWidth,\n      size,\n      currentPage,\n      form,\n      submitCash,\n      handleRowClick,\n      averageSum,\n      totalDebt,\n      computed,\n      reactive,\n      ref,\n      get storeToRefs() {\n        return storeToRefs;\n      },\n      TheComponentHeader,\n      get PriceSpacer() {\n        return PriceSpacer;\n      },\n      ThePagination,\n      get useStore() {\n        return useStore;\n      },\n      get priceSpacer() {\n        return priceSpacer;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["computed","reactive","ref","storeToRefs","TheComponentHeader","PriceSpacer","ThePagination","useStore","priceSpacer","formLabelWidth","store","patients","doctors","cashDialog","size","currentPage","form","name","doctorId","totalSum","payedByCash","payedByCard","totalDebt","patientId","submitCash","Number","value","console","log","handleRowClick","row","id","averageSum"],"sources":["/Users/air/Documents/crm-front/src/views/cash/CashList.vue"],"sourcesContent":["<template>\n    \n    <TheComponentHeader \n    header-title=\"Kassa\"\n    route=\"Kassa\"\n    btn-title=\"Kassa qo'shish\"\n    />\n    <div class=\"table__content\">\n        <el-table\n        :data=\"patients\"\n        empty-text=\"Ma'lumot mavjud emas!\"\n        @row-click=\"handleRowClick\"\n        row-key=\"id\"\n        >\n        <el-table-column type=\"index\" label=\"â„–\" width=\"55\"/>\n        <el-table-column label=\"Bemor Ismi\" width=\"180\">\n            <template #default=\"scope\">\n                <span>{{ scope.row.name }} {{ scope.row.surname }}</span>\n            </template>\n        </el-table-column>\n        <el-table-column label=\"Kasbi\">\n            <template #default=\"scope\">\n                <span>{{ scope.row.category }}</span>\n            </template>\n        </el-table-column>\n        \n        <el-table-column label=\"Xizmat narxi\">\n            <template #default=\"scope\">\n                <span>{{ PriceSpacer(scope.row.serviceCost) }} so'm</span>\n            </template>\n        </el-table-column>\n        \n        <!-- <el-table-column label=\"Ish vaqti\">\n            <template #default=\"scope\">\n                <span>{{ new Date(scope.row.workTime[0]).getHours() }}:{{ new Date(scope.row.workTime[1]).getHours() }}</span>\n            </template>\n        </el-table-column> -->\n        \n        <!-- <el-table-column width=\"182\">\n            <template #default=\"scope\">\n                <div class=\"actions\">\n                    <el-button \n                    size=\"small\" \n                    @click=\"handleEdit(scope.row.id)\"\n                    >Edit</el-button\n                    >\n                    \n                    <el-popconfirm \n                    title=\"Are you sure to delete this?\"\n                    @confirm=\"handleDelete(scope.row.id)\"\n                    >\n                    <template #reference>\n                        <el-button\n                        size=\"small\"\n                        type=\"danger\"\n                        >Delete</el-button\n                        >          \n                    </template>\n                </el-popconfirm>\n            </div>\n        </template>\n    </el-table-column> -->\n</el-table>\n<ThePagination \nv-show=\"patients?.totalPages > 1\"\n:current-page=\"currentPage\"\n:size=\"size\"\n:total-elements=\"patients?.totalElements\"\n@set-pageable=\"setPageable($event)\"\n/>\n</div>\n\n<el-dialog \nv-model=\"cashDialog\" \ntitle=\"Hisobotga qo'shish\"\n>\n<el-form :model=\"form\">\n    <p v-show=\"averageSum\">Bunday summa kiritish mumkin emas!</p>\n    <p>Jami summa: {{ priceSpacer(form.totalSum) }}</p>\n    <el-form-item label=\"Bemor ismi\" :label-width=\"formLabelWidth\">\n        <el-input v-model=\"form.name\" autocomplete=\"off\" />\n    </el-form-item>\n    <el-form-item label=\"Doktor\" :label-width=\"formLabelWidth\">\n        <el-select v-model=\"form.doctorId\" placeholder=\"Doktorni tanlash\" disabled>\n            <el-option \n            v-for=\"doctor in doctors\"\n            :label=\"doctor.name\" \n            :value=\"doctor.id\"\n            :key=\"doctor.id\"\n            />\n        </el-select>\n    </el-form-item>\n    <el-form-item label=\"Naqd to'ladi\" :label-width=\"formLabelWidth\">\n        <el-input v-model=\"form.payedByCash\" type=\"number\" autocomplete=\"off\" min=\"0\"/>\n    </el-form-item>\n    <el-form-item label=\"Karta orqali to'ladi\" :label-width=\"formLabelWidth\">\n        <el-input v-model=\"form.payedByCard\" type=\"number\" autocomplete=\"off\" />\n    </el-form-item>\n    <el-form-item label=\"Qarz qoldi\" :label-width=\"formLabelWidth\">\n        <el-input v-model=\"totalDebt\" type=\"number\" autocomplete=\"off\" disabled/>\n    </el-form-item>\n</el-form>\n<template #footer>\n    <span class=\"dialog-footer\">\n        <el-button @click=\"cashDialog = false\">Bekor qilish</el-button>\n        <el-button \n        type=\"primary\" \n        @click=\"submitCash\">\n        Tasdiqlash\n    </el-button>\n</span>\n</template>\n</el-dialog>\n\n</template>\n\n<script setup>\nimport { computed, reactive, ref } from 'vue';\nimport { storeToRefs } from 'pinia';\n// import { usePatients } from '@/store/patients.pinia'\nimport TheComponentHeader from '@/components/TheComponentHeader.vue';\nimport PriceSpacer from \"@/helpers/PriceSpacer.js\"\nimport ThePagination from '@/components/ThePagination.vue';\n// import { useDoctors } from '@/store/doctors.pinia';\nimport { useStore } from '@/store';\nimport priceSpacer from '@/helpers/PriceSpacer.js';\n// const storePatient = usePatients();\n// const storeDoctor = useDoctors();\nconst store = useStore();\nconst { patients, doctors } = storeToRefs(store);\n// const { doctors } = storeToRefs(storeDoctor);\nconst cashDialog = ref(false);\nconst formLabelWidth = '140px';\nconst size = ref(10);\nconst currentPage = ref(1);\n\nconst form = reactive({\n    name: null,\n    doctorId: null,\n    totalSum: 300000,\n    payedByCash: null,\n    payedByCard: null,\n    totalDebt: null,\n    patientId: null\n})\n\nconst submitCash = () => {\n    if(Number(totalDebt.value) >= 0 && Number(form.totalSum) === (Number(form.payedByCash) +  Number(form.payedByCard) + Number(totalDebt.value))){\n        console.log('submitted');\n        cashDialog.value = !cashDialog.value\n    }else{\n        console.log('xato');\n    }\n    \n}\n\nconst handleRowClick = (row) => {\n    cashDialog.value = !cashDialog.value\n    // useDoctors().getAllDoctors();\n    form.name = row.name\n    form.doctorId = row.doctorId\n    form.patientId = row.id\n}\n\n\n\nconst averageSum = computed(() => {\n    return Number(form.totalSum) < Number(form.payedByCash) +  Number(form.payedByCard) ? true : false\n})\n\nconst totalDebt = computed(() => {\n    return Number(form.totalSum) -  (Number(form.payedByCash) +  Number(form.payedByCard))\n})\n\n\n// onMounted(() => {\n//     usePatients().getAllPatients()\n// })\n</script>"],"mappings":"AAqHA,SAASA,QAAQ,EAAEC,QAAQ,EAAEC,GAAG,QAAQ,KAAK;AAC7C,SAASC,WAAW,QAAQ,OAAO;AACnC;AACA,OAAOC,kBAAkB,MAAM,qCAAqC;AACpE,OAAOC,WAAW,MAAM,0BAA0B;AAClD,OAAOC,aAAa,MAAM,gCAAgC;AAC1D;AACA,SAASC,QAAQ,QAAQ,SAAS;AAClC,OAAOC,WAAW,MAAM,0BAA0B;AAClD;AACA;AAKA,MAAMC,cAAc,GAAG,OAAO;;;;;;;IAJ9B,MAAMC,KAAK,GAAGH,QAAQ,CAAC,CAAC;IACxB,MAAM;MAAEI,QAAQ;MAAEC;IAAQ,CAAC,GAAGT,WAAW,CAACO,KAAK,CAAC;IAChD;IACA,MAAMG,UAAU,GAAGX,GAAG,CAAC,KAAK,CAAC;IAE7B,MAAMY,IAAI,GAAGZ,GAAG,CAAC,EAAE,CAAC;IACpB,MAAMa,WAAW,GAAGb,GAAG,CAAC,CAAC,CAAC;IAE1B,MAAMc,IAAI,GAAGf,QAAQ,CAAC;MAClBgB,IAAI,EAAE,IAAI;MACVC,QAAQ,EAAE,IAAI;MACdC,QAAQ,EAAE,MAAM;MAChBC,WAAW,EAAE,IAAI;MACjBC,WAAW,EAAE,IAAI;MACjBC,SAAS,EAAE,IAAI;MACfC,SAAS,EAAE;IACf,CAAC,CAAC;IAEF,MAAMC,UAAU,GAAGA,CAAA,KAAM;MACrB,IAAGC,MAAM,CAACH,SAAS,CAACI,KAAK,CAAC,IAAI,CAAC,IAAID,MAAM,CAACT,IAAI,CAACG,QAAQ,CAAC,KAAMM,MAAM,CAACT,IAAI,CAACI,WAAW,CAAC,GAAIK,MAAM,CAACT,IAAI,CAACK,WAAW,CAAC,GAAGI,MAAM,CAACH,SAAS,CAACI,KAAK,CAAE,EAAC;QAC1IC,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;QACxBf,UAAU,CAACa,KAAK,GAAG,CAACb,UAAU,CAACa,KAAK;MACxC,CAAC,MAAI;QACDC,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;MACvB;IAEJ,CAAC;IAED,MAAMC,cAAc,GAAIC,GAAG,IAAK;MAC5BjB,UAAU,CAACa,KAAK,GAAG,CAACb,UAAU,CAACa,KAAK;MACpC;MACAV,IAAI,CAACC,IAAI,GAAGa,GAAG,CAACb,IAAI;MACpBD,IAAI,CAACE,QAAQ,GAAGY,GAAG,CAACZ,QAAQ;MAC5BF,IAAI,CAACO,SAAS,GAAGO,GAAG,CAACC,EAAE;IAC3B,CAAC;IAID,MAAMC,UAAU,GAAGhC,QAAQ,CAAC,MAAM;MAC9B,OAAOyB,MAAM,CAACT,IAAI,CAACG,QAAQ,CAAC,GAAGM,MAAM,CAACT,IAAI,CAACI,WAAW,CAAC,GAAIK,MAAM,CAACT,IAAI,CAACK,WAAW,CAAC,GAAG,IAAI,GAAG,KAAK;IACtG,CAAC,CAAC;IAEF,MAAMC,SAAS,GAAGtB,QAAQ,CAAC,MAAM;MAC7B,OAAOyB,MAAM,CAACT,IAAI,CAACG,QAAQ,CAAC,IAAKM,MAAM,CAACT,IAAI,CAACI,WAAW,CAAC,GAAIK,MAAM,CAACT,IAAI,CAACK,WAAW,CAAC,CAAC;IAC1F,CAAC,CAAC;;IAGF;IACA;IACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}