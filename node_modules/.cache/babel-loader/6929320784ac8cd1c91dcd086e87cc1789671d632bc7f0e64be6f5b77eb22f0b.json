{"ast":null,"code":"import { onMounted, reactive } from 'vue';\nimport { useDoctors } from \"@/store/doctors.pinia\";\nimport router from '@/router';\nimport TheComponentHeader from '@/components/TheComponentHeader.vue';\nimport Request from '@/api';\nexport default {\n  __name: 'DoctorForm',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const ruleForm = reactive({\n      doctorName: '',\n      workTime: null,\n      surname: '',\n      category: '',\n      serviceCost: '400000'\n    });\n    const doctorId = ref(null);\n    const {\n      doctor\n    } = useDoctors();\n    const rules = reactive({\n      doctorName: [{\n        required: true,\n        message: 'Iltimos ism kiriting',\n        trigger: 'blur'\n      }],\n      surname: [{\n        required: true,\n        message: 'Iltimos familiya kiriting',\n        trigger: 'blur'\n      }],\n      category: [{\n        required: true,\n        message: 'Iltimos kategoriya kiriting',\n        trigger: 'blur'\n      }],\n      serviceCost: [{\n        required: true,\n        message: 'Iltimos xizmat narxini kiriting',\n        trigger: 'blur'\n      }],\n      workTime: [{\n        type: 'date',\n        required: true,\n        message: 'Iltimos ishlash vaqtini kiriting',\n        trigger: 'change'\n      }]\n    });\n    const submitForm = async formEl => {\n      if (!formEl) return;\n      await formEl.validate((valid, fields) => {\n        if (valid) {\n          useDoctors().createDoctor(ruleForm);\n          router.go(-1);\n        } else {\n          console.log('error submit!', fields);\n        }\n      });\n    };\n    const getOneDoctor = id => {\n      Request({\n        url: `doctor/${id}`,\n        method: \"get\"\n      }).then(res => {\n        this.doctor = res.data;\n        return res.data;\n      }).catch(error => {\n        useToast().error(error);\n      });\n    };\n    const resetForm = formEl => {\n      if (!formEl) return;\n      formEl.resetFields();\n    };\n    onMounted(() => {\n      if (router.currentRoute.value.params.id) {\n        doctorId.value = router.currentRoute.value.params.id;\n        getOneDoctor(doctorId);\n        if (doctor) ruleForm.doctorName = doctor?.name;\n        ruleForm.category = doctor?.category;\n        ruleForm.serviceCost = doctor?.serviceCost;\n        ruleForm.surname = doctor?.surname;\n        ruleForm.workTime = doctor?.workTime;\n      }\n    });\n    const __returned__ = {\n      ruleForm,\n      doctorId,\n      doctor,\n      rules,\n      submitForm,\n      getOneDoctor,\n      resetForm,\n      onMounted,\n      reactive,\n      get useDoctors() {\n        return useDoctors;\n      },\n      get router() {\n        return router;\n      },\n      TheComponentHeader,\n      get Request() {\n        return Request;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["onMounted","reactive","useDoctors","router","TheComponentHeader","Request","ruleForm","doctorName","workTime","surname","category","serviceCost","doctorId","ref","doctor","rules","required","message","trigger","type","submitForm","formEl","validate","valid","fields","createDoctor","go","console","log","getOneDoctor","id","url","method","then","res","data","catch","error","useToast","resetForm","resetFields","currentRoute","value","params","name"],"sources":["/Users/air/Documents/crm-front/src/views/doctors/DoctorForm.vue"],"sourcesContent":["<template>\n    <TheComponentHeader \n    header-title=\"Doktor qo'shish\"\n    route=\"DoctorList\"\n    btn-title=\"Orqaga\"\n    />\n    {{ doctor }}\n    <el-form\n    ref=\"ruleFormRef\"\n    :model=\"ruleForm\"\n    :rules=\"rules\"\n    class=\"demo-ruleForm\"\n    >\n    <el-form-item label=\"Doktor ismi\" prop=\"doctorName\">\n        <el-input v-model=\"ruleForm.doctorName\"  autosize/>\n    </el-form-item>\n    <el-form-item label=\"Familiyasi\" prop=\"surname\">\n        <el-input v-model=\"ruleForm.surname\" type=\"input\" />\n    </el-form-item>\n    <el-form-item label=\"Kategoriyasi\" prop=\"category\">\n        <el-input v-model=\"ruleForm.category\" type=\"input\" />\n    </el-form-item>\n    <el-form-item label=\"Xizmat narxi\" prop=\"serviceCost\">\n        <el-input v-model=\"ruleForm.serviceCost\" type=\"input\" />\n    </el-form-item>\n    <el-form-item label=\"Ish vaqti\" required>\n        <el-time-picker\n        v-model=\"ruleForm.workTime\"\n        is-range\n        range-separator=\"To\"\n        start-placeholder=\"Start time\"\n        end-placeholder=\"End time\"\n        />\n    </el-form-item>\n</el-form>\n<div>\n    <el-button type=\"primary\" @click=\"submitForm(ruleFormRef)\">\n        Create\n    </el-button>\n    <el-button @click=\"resetForm(ruleFormRef)\">Reset</el-button>\n</div>\n</template>\n\n<script setup>\nimport { onMounted, reactive } from 'vue'\nimport { useDoctors } from \"@/store/doctors.pinia\"\nimport router from '@/router';\nimport TheComponentHeader from '@/components/TheComponentHeader.vue';\nimport Request from '@/api';\n\nconst ruleForm = reactive({\n    doctorName: '',\n    workTime: null,\n    surname: '',\n    category: '',\n    serviceCost:'400000'\n})\nconst doctorId = ref(null)\n\nconst { doctor } = useDoctors()\n\nconst rules = reactive({\n    doctorName: [\n    { required: true, message: 'Iltimos ism kiriting', trigger: 'blur' },\n    ],\n    surname: [\n    {\n        required: true,\n        message: 'Iltimos familiya kiriting',\n        trigger: 'blur',\n    },\n    ],\n    category: [\n    {\n        required: true,\n        message: 'Iltimos kategoriya kiriting',\n        trigger: 'blur',\n    },\n    ],\n    serviceCost: [\n    {\n        required: true,\n        message: 'Iltimos xizmat narxini kiriting',\n        trigger: 'blur',\n    },\n    ],\n    workTime: [\n    {\n        type: 'date',\n        required: true,\n        message: 'Iltimos ishlash vaqtini kiriting',\n        trigger: 'change',\n    },\n    ]\n})\n\nconst submitForm = async (formEl) => {\n    if (!formEl) return\n    await formEl.validate((valid, fields) => {\n        if (valid) {\n            useDoctors().createDoctor(ruleForm);\n            router.go(-1)\n        } else {\n            console.log('error submit!', fields)\n        }\n    })\n}\n\nconst getOneDoctor = (id) => {\n    Request({\n        url:`doctor/${id}`,\n        method:\"get\"\n    }).then((res) => {\n        this.doctor = res.data\n        return res.data\n    }).catch((error) => {\n        useToast().error(error)\n    })\n}\n\nconst resetForm = (formEl) => {\n    if (!formEl) return\n    formEl.resetFields()\n}\n\nonMounted(() => {\n    if(router.currentRoute.value.params.id){\n        doctorId.value = router.currentRoute.value.params.id;\n        getOneDoctor(doctorId);\n        if(doctor)\n        ruleForm.doctorName =  doctor?.name\n        ruleForm.category =  doctor?.category\n        ruleForm.serviceCost =  doctor?.serviceCost\n        ruleForm.surname =  doctor?.surname\n        ruleForm.workTime =  doctor?.workTime\n    }\n})\n</script>\n\n\n<style scoped>\n.demo-ruleForm{\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n}\n\n.demo-ruleForm .el-form-item{\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n}\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}