{"ast":null,"code":"import { onMounted, reactive, ref } from 'vue';\n// import { useDoctors } from \"@/store/doctors.pinia\"\n// import { usePatients } from \"@/store/patients.pinia\"\nimport { useStore } from '@/store';\nimport { useToast } from \"@/store/toast.pinia\";\nimport router from '@/router';\nimport TheComponentHeader from '@/components/TheComponentHeader.vue';\n// import Request from '@/api';\nimport { storeToRefs } from 'pinia';\nexport default {\n  __name: 'RegisterForm',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const ruleFormRef = ref();\n    const store = useStore();\n    const {\n      doctors\n    } = storeToRefs(store);\n    const doctorId = ref(null);\n    const ruleForm = reactive({\n      name: '',\n      dateOfBirth: null,\n      surname: '',\n      serviceCost: '',\n      advertisementName: '',\n      region: '',\n      homePhone: '',\n      mobilePhone: '',\n      city: '',\n      doctorId: null,\n      address: '',\n      roomNumber: null,\n      gender: 'ERKAK'\n    });\n    const rules = reactive({\n      doctorName: [{\n        required: true,\n        message: 'Iltimos ism kiriting',\n        trigger: 'blur'\n      }],\n      surname: [{\n        required: true,\n        message: 'Iltimos familiya kiriting',\n        trigger: 'blur'\n      }],\n      serviceCost: [{\n        required: true,\n        message: 'Iltimos xizmat narxini kiriting',\n        trigger: 'blur'\n      }],\n      workTime: [{\n        type: 'date',\n        required: true,\n        message: 'Iltimos ishlash vaqtini kiriting',\n        trigger: 'change'\n      }]\n    });\n    const submitForm = async formEl => {\n      if (!formEl) return;\n      await formEl.validate(valid => {\n        if (valid) {\n          useStore().createPatients({\n            ...ruleForm,\n            id: useStore().patients.length + 1\n          });\n          router.go(-1);\n        } else {\n          useToast().error(\"Xato malumot kiritildi\");\n        }\n      });\n    };\n\n    // const getOneDoctor = (id) => {\n    //     Request({\n    //         url:`doctor/${id}`,\n    //         method:\"get\"\n    //     }).then((res) => {\n    //         ruleForm.doctorId = res.data.id\n    //     }).catch((error) => {\n    //         useToast().error(error)\n    //     })\n    // }\n\n    const resetForm = formEl => {\n      if (!formEl) return;\n      formEl.resetFields();\n    };\n    onMounted(() => {\n      // useDoctors().getAllDoctors();\n      if (router.currentRoute.value.params.doctorId) {\n        doctorId.value = router.currentRoute.value.params.doctorId;\n        ruleForm.doctorId = router.currentRoute.value.params.doctorId;\n        useStore().doctors.forEach(item => {\n          if (item.id === Number(doctorId.value)) {\n            ruleForm.doctorId = item.id;\n            ruleForm.serviceCost = item.serviceCost;\n            ruleForm.roomNumber = item.roomNumber;\n          }\n        });\n        // getOneDoctor(doctorId.value);\n      }\n    });\n\n    const __returned__ = {\n      ruleFormRef,\n      store,\n      doctors,\n      doctorId,\n      ruleForm,\n      rules,\n      submitForm,\n      resetForm,\n      onMounted,\n      reactive,\n      ref,\n      get useStore() {\n        return useStore;\n      },\n      get useToast() {\n        return useToast;\n      },\n      get router() {\n        return router;\n      },\n      TheComponentHeader,\n      get storeToRefs() {\n        return storeToRefs;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["onMounted","reactive","ref","useStore","useToast","router","TheComponentHeader","storeToRefs","ruleFormRef","store","doctors","doctorId","ruleForm","name","dateOfBirth","surname","serviceCost","advertisementName","region","homePhone","mobilePhone","city","address","roomNumber","gender","rules","doctorName","required","message","trigger","workTime","type","submitForm","formEl","validate","valid","createPatients","id","patients","length","go","error","resetForm","resetFields","currentRoute","value","params","forEach","item","Number"],"sources":["/Users/air/Documents/crm-front/src/views/register/RegisterForm.vue"],"sourcesContent":["<template>\n    <TheComponentHeader \n    header-title=\"Bemor qo'shish\"\n    route=\"RegisterUser\"\n    btn-title=\"Orqaga\"\n    :is-button=\"true\"\n    />\n    <el-form\n    ref=\"ruleFormRef\"\n    :model=\"ruleForm\"\n    :rules=\"rules\"\n    class=\"demo-ruleForm\"\n    >\n    <el-form-item label=\"Bemor ismi\" prop=\"name\">\n        <el-input v-model=\"ruleForm.name\"  autosize/>\n    </el-form-item>\n    <el-form-item label=\"Bemor familiyasi\" prop=\"surname\">\n        <el-input v-model=\"ruleForm.surname\" type=\"input\" />\n    </el-form-item>\n    <el-form-item label=\"Nima orqali kelgan\" prop=\"advertisementName\">\n        <el-input v-model=\"ruleForm.advertisementName\" type=\"input\" />\n    </el-form-item>\n    <el-form-item label=\"Viloyat\" prop=\"region\">\n        <el-input v-model=\"ruleForm.region\" type=\"input\" />\n    </el-form-item>\n    <el-form-item label=\"Mobil Telefon\" prop=\"mobilePhone\">\n        <el-input v-model=\"ruleForm.mobilePhone\" type=\"tel\"/>\n    </el-form-item>\n    <el-form-item label=\"Uy telefoni\" prop=\"homePhone\">\n        <el-input v-model=\"ruleForm.homePhone\" type=\"tel\"/>\n    </el-form-item>\n    <el-form-item label=\"Shahar\" prop=\"city\">\n        <el-input v-model=\"ruleForm.city\" type=\"input\" />\n    </el-form-item>\n    <el-form-item label=\"Uy manzili\" prop=\"address\">\n        <el-input v-model=\"ruleForm.address\" type=\"input\" />\n    </el-form-item>\n    <el-form-item label=\"Doktor\" prop=\"doctorId\">\n        <el-select v-model=\"ruleForm.doctorId\">\n            <el-option\n            v-for=\"doctor in doctors\" \n            :key=\"doctor.id\"\n            :label=\"doctor.doctorName + '(' + doctor.category + ')'\"\n            :value=\"doctor.id\"\n            >\n        </el-option>\n    </el-select>\n</el-form-item>\n\n<el-form-item label=\"Tug'ilgan sanasi\" required>\n    <el-date-picker\n    v-model=\"ruleForm.dateOfBirth\"\n    is-range\n    range-separator=\"To\"\n    start-placeholder=\"Start time\"\n    end-placeholder=\"End time\"\n    />\n</el-form-item>\n\n<el-form-item label=\"Jinsi\" prop=\"gender\">\n    <el-radio-group v-model=\"ruleForm.gender\" size=\"large\">\n        <el-radio-button label=\"ERKAK\" />\n        <el-radio-button label=\"AYOL\" />\n    </el-radio-group>\n</el-form-item>\n</el-form>\n<div>\n    <el-button type=\"primary\" @click=\"submitForm(ruleFormRef)\">\n        Create\n    </el-button>\n    <el-button @click=\"resetForm(ruleFormRef)\">Reset</el-button>\n</div>\n</template>\n\n<script setup>\nimport { onMounted, reactive, ref } from 'vue'\n// import { useDoctors } from \"@/store/doctors.pinia\"\n// import { usePatients } from \"@/store/patients.pinia\"\nimport { useStore } from '@/store';\nimport { useToast } from \"@/store/toast.pinia\"\nimport router from '@/router';\nimport TheComponentHeader from '@/components/TheComponentHeader.vue';\n// import Request from '@/api';\nimport { storeToRefs } from 'pinia';\nconst ruleFormRef = ref();\nconst store = useStore();\n\nconst { doctors } = storeToRefs(store);\nconst doctorId = ref(null)\n\nconst ruleForm = reactive({\n    name: '',\n    dateOfBirth: null,\n    surname: '',\n    serviceCost:'',\n    advertisementName:'',\n    region:'',\n    homePhone:'',\n    mobilePhone:'',\n    city:'',\n    doctorId:null,\n    address:'',\n    roomNumber:null,\n    gender: 'ERKAK',\n})\n\nconst rules = reactive({\n    doctorName: [\n    { required: true, message: 'Iltimos ism kiriting', trigger: 'blur' },\n    ],\n    surname: [\n    {\n        required: true,\n        message: 'Iltimos familiya kiriting',\n        trigger: 'blur',\n    },\n    ],\n    serviceCost: [\n    {\n        required: true,\n        message: 'Iltimos xizmat narxini kiriting',\n        trigger: 'blur',\n    },\n    ],\n    workTime: [\n    {\n        type: 'date',\n        required: true,\n        message: 'Iltimos ishlash vaqtini kiriting',\n        trigger: 'change',\n    },\n    ]\n})\n\nconst submitForm = async (formEl) => {\n    if (!formEl) return\n    await formEl.validate((valid) => {\n        if (valid) {\n            useStore().createPatients({...ruleForm, id: useStore().patients.length + 1});\n            router.go(-1)\n        } else {\n            useToast().error(\"Xato malumot kiritildi\")\n        }\n    })\n}\n\n// const getOneDoctor = (id) => {\n    //     Request({\n        //         url:`doctor/${id}`,\n        //         method:\"get\"\n        //     }).then((res) => {\n            //         ruleForm.doctorId = res.data.id\n            //     }).catch((error) => {\n                //         useToast().error(error)\n                //     })\n                // }\n                \n                const resetForm = (formEl) => {\n                    if (!formEl) return\n                    formEl.resetFields()\n                }\n                \n                onMounted(() => {\n                    // useDoctors().getAllDoctors();\n                    if(router.currentRoute.value.params.doctorId){\n                        doctorId.value = router.currentRoute.value.params.doctorId;\n                        ruleForm.doctorId = router.currentRoute.value.params.doctorId;\n                        useStore().doctors.forEach(item => {\n                            if(item.id === Number(doctorId.value)){\n                                ruleForm.doctorId = item.id;\n                                ruleForm.serviceCost = item.serviceCost\n                                ruleForm.roomNumber = item.roomNumber\n                            }\n                        })\n                        // getOneDoctor(doctorId.value);\n                    }\n                })\n            </script>\n            \n            \n            <style scoped>\n            .demo-ruleForm{\n                display: grid;\n                grid-template-columns: 1fr 1fr 1fr;\n            }\n            \n            .demo-ruleForm .el-form-item{\n                display: flex;\n                flex-direction: column;\n                align-items: flex-start;\n            }\n        </style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}